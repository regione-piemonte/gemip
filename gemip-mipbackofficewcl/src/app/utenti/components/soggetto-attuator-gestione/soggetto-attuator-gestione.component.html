<!--
 * @license
 *
 * Copyright © 2025 Regione Piemonte
 *
 * Licensed under the EUPL, Version 1.2 or – as soon they will be
 * approved by the European Commission - subsequent versions of the
 * EUPL (the "Licence");
 *
 * You may not use this work except in compliance with the Licence.
 * You may obtain a copy of the Licence at:
 *
 * https://interoperable-europe.ec.europa.eu/collection/eupl/eupl-text-eupl-12
 * or
 * https://opensource.org/license/EUPL-1.2
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the Licence is distributed on an "AS IS" basis,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the Licence for the specific language governing permissions and
 * limitations under the Licence.
 -->

<div class="row">
  <button class="col-auto d-flex justify-content-start" mat-button aria-label="Indietro" (click)="tornaIndietro()"><mat-icon role="presentation">arrow_back</mat-icon></button>
</div>
<!-- Expansion panel per la ricerca -->
<mat-expansion-panel  class="mt-3"
                      [expanded]="panelOpenState"
                      (opened)="openPanel()"
                      (closed)="closePanel()">

  <mat-expansion-panel-header>
    <mat-panel-title class="search-icon">
      <strong class="ms-2">Criteri di ricerca</strong>
      <mat-icon role="presentation">{{!panelOpenState ? 'keyboard_arrow_down' : 'keyboard_arrow_up' }}</mat-icon>
    </mat-panel-title>
  </mat-expansion-panel-header>

<ng-template matExpansionPanelContent>
<form [formGroup]="form">


  <div class="row">

    <!-- Denominazione-->
    <mat-form-field  class="col-md-6 col-sm-12" appearance="legacy">
      <mat-label>Denominazione</mat-label>
      <input matInput formControlName="denominazione">
    </mat-form-field>
    <!-- Email-->
    <mat-form-field  class="col-md-6 col-sm-12" appearance="legacy">
      <mat-label>Email</mat-label>
      <input matInput formControlName="email">
    </mat-form-field>

    <mat-radio-group formControlName="tipoSogg" class="col-12 col-sm-12" aria-label="Select an option">
      <mat-radio-button class="m-2" value="Att">Soggetti attuatori</mat-radio-button>
      <mat-radio-button class="m-2" value="Aff">Soggetti affidatari</mat-radio-button>
      <mat-radio-button class="m-2" value="Rgg">Referente regionale</mat-radio-button>
      <mat-radio-button class="m-2" value="Apl">APL</mat-radio-button>
    </mat-radio-group>

  </div>

  <mat-action-row class="action-row--morebtn" >
    <button class="btn btn--outline-primary" (click)="clear()">Pulisci i filtri</button>
    <button class="btn btn--primary" (click)="onSearch()">CERCA</button>
  </mat-action-row>

</form>
</ng-template>
</mat-expansion-panel>


<!-- Tabella -->
<div class="mt-5">
  <app-table
    *ngIf="visibleTable"
    [rowData]="rowData"
    [tableSettings]="tableSettings"
    [columnList]="columnList">
  </app-table>
</div>

<div class="mt-5">
  <app-table
    *ngIf="visibleTableAttuatori"
    [rowData]="rowData"
    [tableSettings]="tableSettings"
    [columnList]="columnListAttuatori">
  </app-table>
</div>
