<!--
 * @license
 *
 * Copyright © 2025 Regione Piemonte
 *
 * Licensed under the EUPL, Version 1.2 or – as soon they will be
 * approved by the European Commission - subsequent versions of the
 * EUPL (the "Licence");
 *
 * You may not use this work except in compliance with the Licence.
 * You may obtain a copy of the Licence at:
 *
 * https://interoperable-europe.ec.europa.eu/collection/eupl/eupl-text-eupl-12
 * or
 * https://opensource.org/license/EUPL-1.2
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the Licence is distributed on an "AS IS" basis,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the Licence for the specific language governing permissions and
 * limitations under the Licence.
 -->

<button class="col-auto d-flex justify-content-start" mat-button aria-label="Indietro" (click)="tornaIndietro()"><mat-icon role="presentation">arrow_back</mat-icon></button>
<app-criteri-ricerca class="mb-5" [filterFor]="'anagrafica-partecipanti'" (onSearch)="onSearch($event)">
</app-criteri-ricerca>


<!-- Tabella -->

<div class="table-container-report mt-5" *ngIf="visibleTable">
    <div class="row p-3 justify-content-end">
        <button mat-raised-button  [disabled]="dataSource.data.length <=0"  [ngClass]="dataSource.data.length > 0 ? 'btn--plain-text--primary esporta-excel' : 'col-3' "  (click)="onDownload()">
            <i class="material-icons" role="presentation">file_download</i> ESPORTA EXCEL
        </button>
    </div>
    <mat-card>
    <mat-card-content>
        <table mat-table [dataSource]="dataSource"  class="table-results">
            <!-- id Column -->
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef> Identificativo </th>
                <td mat-cell  *matCellDef="let element"> {{element.id}} </td>
            </ng-container>
            <!-- descrizione Column -->
            <ng-container matColumnDef="descrizione">
                <th mat-header-cell *matHeaderCellDef> Descrizione </th>
                <td mat-cell *matCellDef="let element"> {{element.descrizione}} </td>
            </ng-container>
            <!-- data Column -->
            <ng-container matColumnDef="data">
                <th mat-header-cell *matHeaderCellDef> Data </th>
                <td mat-cell *matCellDef="let element"> {{element.data}} </td>
            </ng-container>
            <!-- oraInizio Column -->
            <ng-container matColumnDef="oraInizio">
                <th mat-header-cell *matHeaderCellDef> Ora inizio </th>
                <td mat-cell *matCellDef="let element"> {{element.oraInizio}} </td>
            </ng-container>
            <!-- sede Column -->
            <ng-container matColumnDef="sede">
                <th mat-header-cell *matHeaderCellDef> Sede </th>
                <td mat-cell *matCellDef="let element"> {{element.sede}} </td>
            </ng-container>
            <!-- opp Column -->
            <ng-container matColumnDef="opp">
                <th mat-header-cell *matHeaderCellDef>
                    <mat-checkbox
                    (change)="onSelectAll($event.checked)"
                    [(ngModel)]="selectAll"
                    ></mat-checkbox> 
                </th>
                <td mat-cell *matCellDef="let element">
                    <mat-checkbox
                    [(ngModel)] = 'element.opp'  
                    ></mat-checkbox>
                </td>
            </ng-container>
                <!-- Row shown when there is no matching data that will be provided to the wrapper table. -->
            

            <tr mat-header-row *matHeaderRowDef="columsName; sticky:true;"></tr>
            <tr mat-row *matRowDef="let row; columns: columsName;"></tr>
           
            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell"
                    [attr.colspan]="dataSource.data.length">
                    Nessun dato è stato trovato.</td>
            </tr>
            
        </table>
    </mat-card-content>
</mat-card>
<mat-paginator [length]="tableSettings.length" [pageSize]="tableSettings.pageSize"
            [pageIndex]="tableSettings.pageIndex" [pageSizeOptions]="tableSettings.pageSizeOptions"
            [length]="tableSettings.length" [showFirstLastButtons]="tableSettings.showFirstLastButtons"
            (page)="onSearch(filtri,$event)">
</mat-paginator>
</div>

