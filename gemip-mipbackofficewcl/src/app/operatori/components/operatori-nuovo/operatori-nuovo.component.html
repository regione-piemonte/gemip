<!--
 * @license
 *
 * Copyright © 2025 Regione Piemonte
 *
 * Licensed under the EUPL, Version 1.2 or – as soon they will be
 * approved by the European Commission - subsequent versions of the
 * EUPL (the "Licence");
 *
 * You may not use this work except in compliance with the Licence.
 * You may obtain a copy of the Licence at:
 *
 * https://interoperable-europe.ec.europa.eu/collection/eupl/eupl-text-eupl-12
 * or
 * https://opensource.org/license/EUPL-1.2
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the Licence is distributed on an "AS IS" basis,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the Licence for the specific language governing permissions and
 * limitations under the Licence.
 -->

<div class="row not-stampa">
  <button class="col-auto d-flex justify-content-start" mat-button aria-label="Indietro" (click)="tornaIndietro()"><mat-icon role="presentation">arrow_back</mat-icon></button>
  <button class="col-auto ms-auto d-flex justify-content-end" mat-button (click)="selectedTab = 2" aria-label="Stampa"><mat-icon role="presentation">print</mat-icon></button>
</div>

<mat-tab-group class="mt-3"
              [selectedIndex]="selectedTab"
              (selectedIndexChange)="selectedTab = $event;">

<!-- #################################################### -->
<mat-tab label="Operatore">
  <form [formGroup]="form" >
  <mat-card>
  <mat-card-header>
    <mat-card-title>
        <h5 class="mb-5">Dati anagrafici</h5>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content class="container-fluid">
  <div class="row">
    <!-- Cognome -->
    <div class="row" style="margin: 0px 0px 20px; ">
      <h5 style="padding: 0px;">{{operatore?.nome}}  {{operatore?.cognome}}</h5>
    </div>
    <div class="row">
      <div class="col-6"> Codice Fiscale</div>
    </div>
    <div class="row" style="font-weight: bold; margin-top: 7px; margin-bottom:20px;">
      <div class="col-6"> {{operatore?.codFiscaleUtente}}</div>
    </div>

    <!-- email -->
    <mat-form-field class="col-md-6 col-sm-12" appearance="legacy">
      <mat-label>Email</mat-label>
      <input matInput formControlName="email">
      <mat-error>
        <app-control-messages [control]="form.controls['email'] | castFromControl"></app-control-messages>
      </mat-error>
    </mat-form-field>
    <!-- telefonoF -->
    <mat-form-field class="col-md-6 col-sm-12" appearance="legacy">
      <mat-label>Telefono fisso</mat-label>
      <input matInput formControlName="telefonoF">
      <mat-error>
        <app-control-messages [control]="form.controls['telefonoF'] | castFromControl"></app-control-messages>
      </mat-error>
    </mat-form-field>


    <span>Abilitato:</span>
    <mat-slide-toggle
        class="col-md-6 col-sm-12"
        [checked]="abilitato"
        [disabled]="!canModify"
        [attr.aria-label]="abilitato?'disabilita':'abilita'"
        (toggleChange)="onToggle()">
    </mat-slide-toggle>
  </div>
  </mat-card-content>


  </mat-card>
  </form>

  <div class="btn--group-card">
    <div class="ms-auto p-2">
      <button mat-button *ngIf="canModify"
              class="btn btn--primary"
              aria-label="salva modifiche"
              (click)="onSalva()">SALVA</button>
    </div>
  </div>
</mat-tab>

<!-- #################################################### -->
<mat-tab label="Soggetti" >
  <mat-card >
    <mat-card-header>
      <mat-card-title>
        <h5 class="mb-5">Elenco partner associati</h5>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <app-table
        [rowData]="rowData"
        [tableSettings]="tableSettings"
        [columnList]="columnList">
      </app-table>
    </mat-card-content>
  </mat-card>
</mat-tab>

<mat-tab label="Stampa" >
  <form [formGroup]="form" class="myDivToPrint">
    <mat-card>
    <mat-card-header>
      <mat-card-title>
          <h5 class="mb-5">Dati anagrafici</h5>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content class="container-fluid">
    <div class="row">
      <!-- Cognome -->
      <div class="row" style="margin: 0px 0px 20px; ">
        <h5 style="padding: 0px;">{{operatore?.nome}}  {{operatore?.cognome}}</h5>
      </div>
      <div class="row">
        <div class="col-6"> Codice Fiscale</div>
      </div>
      <div class="row" style="font-weight: bold; margin-top: 7px; margin-bottom:20px;">
        <div class="col-6"> {{operatore?.codFiscaleUtente}}</div>
      </div>

      <!-- email -->
      <div class="col-3 mb-3"><strong>Email</strong></div>
      <div class="col-3">{{operatore?.email}} </div>
      <!-- telefonoF -->
      <div class="col-3"><strong>Telefono</strong></div>
      <div class="col-3">{{operatore?.telefono}} </div>


      <div class="col-3 mb-3"><strong>Abilitato</strong></div>
      <div class="col-3">{{abilitato? "Si":"No"}} </div>
    </div>
    </mat-card-content>

    <mat-card-header class="mt-5">
      <mat-card-title>
        <h5 class="mb-5">Elenco partner associati</h5>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <app-table
        [rowData]="rowData"
        [tableSettings]="tableSettings"
        [columnList]="columnList"
        [isStampa]="true">
      </app-table>
    </mat-card-content>
  </mat-card>
  </form>
  <div class="btn--group-card">
    <div class="ms-auto p-2">
      <button mat-button
              class="btn btn--primary"
              aria-label="Salva"
              (click)="print()">STAMPA</button>
    </div>
  </div>

</mat-tab>


</mat-tab-group>

