<!--
 * @license
 *
 * Copyright © 2025 Regione Piemonte
 *
 * Licensed under the EUPL, Version 1.2 or – as soon they will be
 * approved by the European Commission - subsequent versions of the
 * EUPL (the "Licence");
 *
 * You may not use this work except in compliance with the Licence.
 * You may obtain a copy of the Licence at:
 *
 * https://interoperable-europe.ec.europa.eu/collection/eupl/eupl-text-eupl-12
 * or
 * https://opensource.org/license/EUPL-1.2
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the Licence is distributed on an "AS IS" basis,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the Licence for the specific language governing permissions and
 * limitations under the Licence.
 -->

<div class="container-fluid container" >

<div class="container-fluid pt-4 stepper-container d-none d-md-block text-center">
<div class="row stepper-row mb-2 mx-auto" >
  <div class="col">
  <div class="stepper stepper-secondary">
    <mat-icon>done</mat-icon>
  </div>
  </div>
  <div class="col step-space step-space-primary"></div>

  <div class="col">
  <div class="stepper stepper-secondary">
    <mat-icon>done</mat-icon>
  </div>
  </div>
  <div class="col step-space step-space-primary"></div>

  <div class="col">
  <div class="stepper stepper-primary">
    <div class="number" >3</div>
  </div>
  </div>
  <div class="col step-space step-space-primary" ></div>

  <div class="col" >
  <div class="stepper stepper-disabled" >
    <div class="number" >4</div>
  </div>
  </div>
</div>
<div class="row stepper-row mx-auto" >
  <div class="col"><div class="stepper"> Scegli dove e quando</div></div>
  <div class="col step-space step-space-trasp">
  </div>
  <div class="col"><div class="stepper">inserisci i tuoi dati personali</div></div>
  <div class="col step-space step-space-trasp">
  </div>
  <div class="col"><div class="stepper"><strong>descrivi la tua impresa</strong></div></div>
  <div class="col step-space step-space-trasp">
  </div>
  <div class="col"><div class="stepper">completa la prenotazione</div></div>
</div>
</div>



  <!-- Titolo -->
<div class="row">
  <div class="col pt-4">
    <h2>3. Descrivi la tua idea d'impresa</h2>
  </div>
</div>


<form [formGroup]="formIdeaDiImpresa">
  <!-- La tua idea -->
  <mat-card class="my-5 border border-2">
    <mat-card-content class="container-fluid">
      <div class="row">
        <!-- Icona -->
        <div class="col-lg-3 col-md-3 d-flex flex-column align-items-center p-2">
          <img alt=""
              [src]="'/assets/idea/idea.svg'"
              class="img-fluid">
        </div>

        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 p-4" >
          <div class="row" style="margin: 0px 0px;"><h3 style="padding: 0px;"> La tua idea</h3></div>
          <div class="row" >
            <!-- Titolo dell'idea-->
            <div class="col-6" >
              <mat-form-field  appearance="legacy">
                <mat-label>Titolo dell'idea</mat-label>
                <input matInput formControlName="titoloIdeaImprenditoriale"  [maxlength]="150">
                <mat-error>
                  <app-control-messages [control]="formIdeaDiImpresa.controls['titoloIdeaImprenditoriale'] |castFromControl"></app-control-messages>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-6"></div>
            <div class="col-12">
              <div class="row" >
                <!-- Titolo dell'idea-->
                <div class="col-12" >
                  <mat-form-field appearance="outline">
                    <mat-label class="text-small-450">descrivi la tua idea imprenditoriale o di lavoro autonomo (MAX 500 CARATTERI)</mat-label>
                    <textarea matInput style="height: 50px;"  formControlName="descrizione"  [maxlength]="500"></textarea>
                    <mat-error>
                      <app-control-messages [control]="formIdeaDiImpresa.controls['descrizione'] |castFromControl"></app-control-messages>
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
            </div>


          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- In PIU -->
  <mat-card class="my-5 border border-2">
    <mat-card-content class="container-fluid">
      <div class="row">
        <!-- Icona -->
        <div class="col-lg-3 col-md-3 d-flex flex-column align-items-center p-4">
          <img alt=""
              [src]="'/assets/idea/fonte_conoscenza.svg'"
              class="img-fluid">
        </div>
        <!-- Come hai conosciuto MIP -->
        <div class="col-lg-4 col-md-4 p-4 d-flex flex-column align-items-center text-center align-self-center">
          <mat-form-field  appearance="legacy">
            <mat-label>Come hai conosciuto il programma MIP?</mat-label>
            <mat-select formControlName="conoscenzaProgrammaMip" (selectionChange)="selctionChange()" >
              <mat-option  *ngFor="let fonteCon of listaFonteConoscenza" [value]="fonteCon.codiceFonteConoscenzaMip"  > {{fonteCon.descrizioneFonteConoscenzaMip}}</mat-option>

            </mat-select>
          </mat-form-field>
        </div>
        <!-- Altro-->
        <div class="col-lg-4 col-md-4 p-4 d-flex flex-column align-items-center text-center align-self-center">
          <mat-form-field  appearance="legacy" >
            <mat-label>Altro (specificare)</mat-label>
            <textarea matInput  formControlName="altro" [maxlength]="250"></textarea>
          </mat-form-field>
        </div>

      </div>
      <div class="row mx-auto ">
        <div class="col-12" >
          <mat-form-field appearance="outline">
            <mat-label class="text-small-450" >Inserisci delle note o dei commenti (MAX 4000 CARATTERI)</mat-label>
            <textarea matInput style="height: 50px;"  formControlName="noteCommenti"  [maxlength]="4000"></textarea>
            <mat-error>
              <app-control-messages [control]="formIdeaDiImpresa.controls['noteCommenti'] |castFromControl"></app-control-messages>
            </mat-error>
          </mat-form-field>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Piulsanti In fondo -->
  <div class="row mt-5 pb-4">
    <div class="col-4 button_1"><button class="btn btn-sm btn--link-primary" (click)="onIndietro()">INDIETRO</button></div>
    <div class="col-4 button_2"><button class="btn btn-sm btn--outline-primary" (click)="onSave()">SALVA IN BOZZA</button></div>
    <div class="col-4 button_3"><button class="btn btn-sm btn--primary" (click)="onSave(true)">CONTINUA</button></div>
  </div>

</form>
</div>


<ng-template #attenzione>
  <!-- Title -->
  <h2 mat-dialog-title>Attenzione!</h2>
  <!-- Content -->
  <section mat-dialog-content style="max-height: 70vh">
    <!-- Date & Time -->
    <div class="row py-3"><p>
      <mat-icon class="done-icon-title" style="color: white; background-color: red  !important; margin-right: 10px;">close</mat-icon>
      Attenzione! Hai già fatto la registrazione a MIP - Mettersi in proprio e non ti è possibile effettuare alcuna modifica se non quelle permesse dall'applicativo dopo l'invio. </p></div>
  </section>
  <!-- Actions -->
  <div  mat-dialog-actions
        [align]="'end'">
    <div class="p-2">
      <button mat-dialog-close
              mat-raised-button
              class="btn btn--primary"
              aria-label="dati non salvati correttamente torna alla home"
              [routerLink]="'/dashboard/home'">
        TORNA ALLA HOME PAGE
      </button>
    </div>
  </div>
</ng-template>
